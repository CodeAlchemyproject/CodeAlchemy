<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% include "_site_header.html" %}
</head>

<body>
    {% include "nav_bar.html" %}
    <div class="container">
        <form action="/manager/add_problem" method="post">
            <div class="row justify-content-center align-items-center g-2 mt-4">
                <h3 class="mt-4">題目標題:</h3>
                <div class="mb-3">
                    <input type="text" class="form-control" name="title" id="" aria-describedby="basic-addon2"
                        placeholder="" />
                </div>
            </div>
            <div class="
        row justify-content-center align-items-center g-2">
                <h3 class="mt-4">題目說明:</h3>
                <div class="mb-3">
                    <div class="mb-3">
                        <textarea class="form-control" name="content" id="" rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center align-items-center g-2"></div>
            <h3 class="mt-4">輸入說明:</h3>
            <div class="mb-3">
                <textarea class="form-control" name="enter_description" id="" rows="3"></textarea>
            </div>
            <h3 class="mt-4">輸出說明:</h3>
            <div class="mb-3">
                <textarea class="form-control" name="output_description" id="" rows="3"></textarea>
            </div>
            <h3 class="mt-4">範例輸入:</h3>
            <div class="mb-3">
                <textarea class="form-control" name="example_input" id="" rows="3"></textarea>
            </div>
            <h3 class="mt-4">範例輸出:</h3>
            <div class="mb-3">
                <textarea class="form-control" name="example_output" id="" rows="3"></textarea>
            </div>
            <h3 class="mt-4">測試資料 輸入#1:</h3>
            <div class="mb-3">
                <textarea class="form-control" name="test_input[]" id="" aria-describedby="basic-addon2"
                    placeholder="輸入#1"></textarea>
            </div>
            <h3 class="mt-4">測試資料 輸出#1:</h3>
            <div class="mb-3">
                <textarea class="form-control" name="test_output[]" id="" aria-describedby="basic-addon2"
                    placeholder="輸出#1"></textarea>
            </div>
            <div id="additional-rows"></div>

            <button class="btn btn-primary mt-4" id="add-row-btn" type="button">新增一筆</button>

            <h3 class="mt-4">難度<br></h3>
            <div class="mb-3">
                <select class="form-select form-select-lg" name="difficulty" id="">
                    <option value="easy" {% if (difficulty=='easy' ) %}selected{% endif %}>Easy</option>
                    <option value="middle" {% if (difficulty=="middle" ) %}selected{% endif %}>Middle</option>
                    <option value="hard" {% if (difficulty=="hard" ) %}selected{% endif %}>Hard</option>
                </select>
            </div>
            <h3 class="mt-4">標籤</h3>
            <div class="mb-3">
                <input type="text" class="form-control" name="tag" id="" aria-describedby="標籤" placeholder="" />
            </div>
            <h3 class="mt-4">影片ID</h3>
            <div class="mb-3">
                <input type="text" class="form-control" name="video_id" id="" aria-describedby="影片ID" placeholder="" />
            </div>
            <button type="button" class="btn btn-success" id="save_btn" data-bs-toggle="modal"
                data-bs-target="#save_modal"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-floppy2-fill" viewBox="0 0 16 16">
                    <path d="M12 2h-2v3h2z" />
                    <path
                        d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13a1.5 1.5 0 0 0 1.5-1.5V2.914a1.5 1.5 0 0 0-.44-1.06L14.147.439A1.5 1.5 0 0 0 13.086 0zM4 6a1 1 0 0 1-1-1V1h10v4a1 1 0 0 1-1 1zM3 9h10a1 1 0 0 1 1 1v5H2v-5a1 1 0 0 1 1-1" />
                </svg>儲存</button>
        </form>
        <div class="modal fade" id="save_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">儲存確認</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        確定要儲存變更嗎？
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-primary" id="confirm_save">儲存變更</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        let count = 1;

        document.getElementById("add-row-btn").addEventListener("click", function () {
            count++;

            // 創建新的輸入/輸出行
            const newInputGroup = `
                <h3 class="mt-4">測試資料 輸入#${count}:</h3>
                <div class="mb-3">
                    <input type="text" class="form-control" name="test_input[]" placeholder="輸入#${count}" />
                </div>
                <h3 class="mt-4">測試資料 輸出#${count}:</h3>
                <div class="mb-3">
                    <input type="text" class="form-control" name="test_output[]" placeholder="輸出#${count}" />
                </div>
            `;

            // 將新行加入到頁面中
            document.getElementById("additional-rows").insertAdjacentHTML('beforeend', newInputGroup);
        });

        document.getElementById('confirm_save').addEventListener('click', function () {
            document.querySelector('form').submit();
        });

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
        crossorigin="anonymous"></script>
</body>

</html>